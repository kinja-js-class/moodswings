<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="new-mood-element.html">

<dom-module id="mood-element">
	<template>

		<new-mood-element on-add-mood="addMoodToFirebase"></new-mood-element>
	</template>
	<script>
		Polymer({
			is: 'mood-element',
			properties: {
				moods: Array
			},
			addMoodToFirebase: function (e) {
				var that = this;
				navigator.geolocation.getCurrentPosition(locationSuccess);
				function locationSuccess (position) {
					moodPush([position.coords.latitude, position.coords.longitude]);
				};
				function moodPush (location) {
					console.log(location);
					that.push('moods', {
						value: e.detail.value,
						date: String(new Date()),
						location: location
					});
				}
			}
		});
	</script>
</dom-module>
