<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="new-mood-element.html">

<dom-module id="mood-element">
	<template>

		<new-mood-element on-add-mood="addMoodToFirebase"></new-mood-element>
		<paper-toggle-button checked={{shouldLocate}}>location</paper-toggle-button>
	</template>
	<script>
		Polymer({
			is: 'mood-element',
			properties: {
				moods: Array
			},
			addMoodToFirebase: function (e) {
				var that = this;
				console.log(this.shouldLocate)
				if (this.shouldLocate) {
					navigator.geolocation.getCurrentPosition(function (position) {
						moodPush([position.coords.latitude, position.coords.longitude]);
					})
				} else {
					moodPush();
				}
				function moodPush (location) {
					console.log(location);
					that.push('moods', {
						value: e.detail.value,
						date: String(new Date()),
						location: location ? location : false
					});
				}
			}
		});
	</script>
</dom-module>
